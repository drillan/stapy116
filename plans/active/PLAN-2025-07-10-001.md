# PLAN-2025-07-10-001: PyQC Phase 1 MVP実装

## 基本情報
- **計画ID**: PLAN-2025-07-10-001
- **作成日**: 2025-07-10
- **ステータス**: in_progress
- **優先度**: high
- **想定工数**: 40-60時間（1-2週間）
- **担当**: Claude Code

## Git管理
- **作業ブランチ**: plan/PLAN-2025-07-10-001
- **ベースブランチ**: feature/pyqc-project-spec
- **PRターゲット**: feature/pyqc-project-spec
- **PR URL**: [完了時に記入]
- **備考**: この計画書自体は仕様の一部として feature/pyqc-project-spec にコミット

## 概要
PyQC (Python Quality Checker) のMVP実装を行い、品質チェック機能に特化した最小限のツールを作成する。

## 背景・理由
- Claude Codeの実践的アプローチ（3つのポイント）のデモンストレーション
- 「堅牢なコードを書く」を具体的に支援するツールが必要
- Pythonエコシステムにおける品質チェックの統合環境を提供

## 実装内容

### Phase 1 スコープ（MVP）
品質チェック機能に特化した最小限の実装：

1. **Ruffチェッカー**
   - PEP 8準拠のコードスタイルチェック
   - 一般的なコーディングエラーの検出
   - インポート順序の検証
   - 自動フォーマット機能

2. **型チェッカー**
   - mypy/ty選択可能な静的型チェック
   - 型アノテーションの完全性チェック
   - 型の不整合検出

3. **基本CLI**
   - check: 品質チェック実行
   - fix: 自動修正実行
   - config: 設定管理
   - init: プロジェクト初期化

4. **Hooks統合**
   - Claude Code hooks設定
   - pre-commit hooks設定

## 実装手順

### Step 1: プロジェクト基盤構築 (8-10時間)
1. PyQCプロジェクトディレクトリ作成
2. pyproject.toml設定（uv対応）
3. 基本パッケージ構造作成
4. 開発環境セットアップ（ruff, mypy, pytest）

### Step 2: 設定管理システム (6-8時間)
1. 設定ファイル読み込み（pyproject.toml, .pyqc.yaml）
2. 設定バリデーション
3. デフォルト設定の定義
4. 設定のテスト実装

### Step 3: コアチェッカー実装 (12-16時間)
1. Ruffチェッカー実装
   - リント実行
   - フォーマットチェック
   - 設定オプション対応
2. 型チェッカー実装
   - mypy/ty選択機能
   - エラー解析とレポート
3. 自動修正機能（basic）

### Step 4: CLI実装 (8-12時間)
1. typerベースのCLI骨格
2. checkコマンド実装
3. fixコマンド実装
4. configコマンド実装
5. initコマンド実装

### Step 5: 統合と出力 (4-6時間)
1. 並列実行機能
2. 結果集約とレポート
3. 出力フォーマット（text, json, github）
4. エラーハンドリング

### Step 6: Hooks統合 (4-6時間)
1. Claude Code hooks設定
2. pre-commit設定
3. 動作確認とテスト

### Step 7: テストとドキュメント (8-10時間)
1. 単体テスト実装
2. 統合テスト実装
3. 基本ドキュメント作成
4. 使用例の作成

## 完了条件
- [ ] 基本的な品質チェック（ruff + mypy/ty）が動作
- [ ] CLIコマンド（check, fix, config, init）が動作
- [ ] `uv run pyqc check`でサンプルプロジェクトをチェック可能
- [ ] Claude Code hooksが正常に動作
- [ ] テストカバレッジ > 80%
- [ ] 基本ドキュメントが完成
- [ ] デモ用のサンプルプロジェクトでの動作確認

## 技術的考慮事項
- **パフォーマンス**: 並列実行によるチェック高速化
- **互換性**: 既存のruff/mypyとの設定互換性
- **拡張性**: 将来のプラグインシステムを考慮した設計
- **ユーザビリティ**: 直感的なCLIと明確なエラーメッセージ

## 関連ファイル
- `@.claude/project-plan.md`: プロジェクト全体計画
- `@.claude/pyqc-spec.md`: 詳細仕様
- `@.claude/implementation-notes.md`: 実装ガイドライン

## 依存関係
### 前提条件
- PyQCプロジェクト仕様の完成（完了済み）
- 実装計画管理システムの構築（完了済み）

### 影響範囲
- プレゼンテーション用デモ素材として活用
- Claude Code実践例として活用
- 将来のPhase 2-4実装の基盤

## リスク・課題
- **技術的リスク**: ruff/mypyのAPI変更への対応
- **スコープクリープ**: MVP範囲の厳守が重要
- **品質リスク**: 自分自身の品質チェックツールとしての信頼性確保

## 進捗ログ
- [2025-07-10 18:30] 計画作成
- [2025-07-10 19:00] 実装開始 - plan/PLAN-2025-07-10-001 ブランチ作成、Step 1開始
- [2025-07-10 19:30] Step 1完了 - プロジェクト基盤構築、基本CLI動作確認、テスト通過
- [2025-07-10 20:00] .claude体系的管理ファイル実装完了、Step 2開始 - 設定管理システム
- [2025-07-10 21:00] Step 2完了 - 設定管理システム実装完了（カバレッジ97%、全テスト通過）
- [2025-07-10 21:30] Step 3開始 - コアチェッカー実装（TDD継続、外部プロセス実行）
- [2025-07-10 22:30] Step 3完了 - コアチェッカー実装完了（全体カバレッジ91%、81テスト通過）
- [2025-07-10 23:00] Step 4開始 - CLI実装（core統合、Rich出力、エンドツーエンド）
- [2025-07-10 23:30] Step 4完了 - CLI実装完了（全コマンド動作、18統合テスト通過、カバレッジ75%）

## 完了時の振り返り
[完了後に記入]
- [うまくいったこと]
- [改善点]
- [学んだこと]
- [今後の活用方法]