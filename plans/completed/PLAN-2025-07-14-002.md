# PLAN-2025-07-14-002: PyQC Init機能廃止とTy削除

## 基本情報

- **計画ID**: PLAN-2025-07-14-002
- **作成日**: 2025-07-14
- **優先度**: high
- **推定工数**: 4-6時間
- **ステータス**: completed

## 背景

PyQCプロジェクトにおいて以下の方針変更を実施：

1. **init機能の廃止**: pre-commitからClaude Codeへ完全移行し、後方互換性を破棄
2. **ty型チェッカーの削除**: mypyのみに統一

## 目標

- 簡潔なAPIの実現
- 保守対象機能の削減
- Claude Code hooks中心のワークフローへの統一

## 実装計画

### Phase 1: Init機能の削除

#### 対象ファイル
1. **CLI実装** (`src/pyqc/cli.py`)
   - `init`コマンド（388-509行）を削除
   - `_create_pre_commit_config`関数を削除
   - `_create_hooks_config`関数を削除

2. **テストファイル** (10ファイル)
   - `tests/integration/test_cli.py`: 4つのinitテスト関数
   - `tests/e2e/test_e2e.py`: `test_init_command`関数
   - `tests/unit/test_*.py`: 各種initテスト

#### 実装手順
1. CLI実装からinit関連コードを削除
2. 全テストファイルからinit関連テストを削除
3. ヘルプテキストの更新

### Phase 2: Ty型チェッカーの削除

#### 対象ファイル
1. **設定管理** (`src/pyqc/config.py`)
   - `type_checker`のバリデーターから"ty"を削除
   - 許可値を"mypy"のみに変更

2. **型チェッカー実装** (`src/pyqc/checkers/type_checker.py`)
   - ty関連の条件分岐を削除
   - tyパース処理を削除

3. **CLI** (`src/pyqc/cli.py`)
   - `--type-checker`オプションのヘルプテキスト更新

4. **設定ファイル** (`pyproject.toml`)
   - 設定例の更新

5. **ドキュメント** (`README.md`)
   - ty言及の削除

#### テストファイル (9ファイル)
- 設定テスト、型チェッカーテスト、CLIテスト、E2Eテストからty関連テストケースを削除

#### 実装手順
1. 設定管理の制約を更新
2. 型チェッカー実装からty分岐を削除
3. CLIヘルプとドキュメントを更新
4. 全テストファイルからty関連テストケースを削除

### Phase 3: 動作確認

1. 残存機能の動作テスト
   - `check`コマンド
   - `fix`コマンド
   - `config`コマンド
   - hooks統合

2. テストスイート実行
   - 全テストが通ることを確認
   - カバレッジの維持

3. 設定ファイル互換性確認
   - 既存のpyproject.toml設定が動作することを確認

## 期待される効果

1. **コードベース削減**: 主にテストコードで25%程度の削減
2. **API簡素化**: 利用可能オプションの削減による分かりやすさ向上
3. **保守性向上**: 対応すべき機能・設定の削減
4. **信頼性向上**: ty未対応による潜在的バグの排除

## リスク

1. **破壊的変更**: 既存のinit機能やty設定を使用していたユーザーへの影響
2. **ドキュメント不整合**: 削除機能に関するドキュメントの更新漏れ

## 成功基準

1. すべてのテストがパス
2. init、tyに関するコードが完全に削除
3. 残存機能（check、fix、config、hooks）が正常動作
4. ドキュメントが更新内容と一致

## 実装ブランチ

- **ブランチ名**: `plan/PLAN-2025-07-14-002`
- **ベースブランチ**: `main`

## 完了日

2025-07-14 完了

## 実装結果

### 削除された機能
1. **init機能**: CLI実装、ヘルプテキスト、全関連テスト
2. **ty型チェッカー**: 設定検証、実装分岐、全関連テスト、ドキュメント

### 成功基準達成状況
- ✅ すべてのテスト（126テスト）がパス
- ✅ init、tyに関するコードが完全に削除
- ✅ 残存機能（check、fix、config、hooks）が正常動作
- ✅ ドキュメントが更新内容と一致

### 効果確認
- **コードベース削減**: テストコード中心に大幅削減
- **API簡素化**: mypyのみの統一により設定が明確化
- **設定動作**: Type Checker設定がmypyに統一されることを確認