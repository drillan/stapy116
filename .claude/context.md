# プロジェクト背景と制約

## プロジェクト背景

### PyQC開発の目的
- Claude Codeの実践的アプローチのデモンストレーション
- 「堅牢なコードを書く」を具体的に支援するツールの実装
- Python品質チェックツールの統合環境提供

### プレゼンテーション文脈
- みんなのPython勉強会#116での発表素材
- 3つのポイント（計画・記録・堅牢性）の実践例
- Vibe Coding → Agentic Codingへの移行デモ

## 技術的制約

### Python環境
- **バージョン**: Python 3.12以上
- **パッケージ管理**: uv必須
- **仮想環境**: uvによる自動管理

### 依存関係制約
- **外部ツール**: ruff, mypy/ty
- **CLI**: typer（Rich統合）
- **設定**: Pydantic v2（エイリアス対応）
- **テスト**: pytest + pytest-cov
- **TOML**: tomllib（読み込み）+ tomli-w（書き込み）
- **YAML**: PyYAML

### パフォーマンス制約
- **実行時間**: 中規模プロジェクト10秒以内
- **メモリ**: 大規模プロジェクト500MB以下
- **並列実行**: CPUコア数ベース

## 開発制約

### スコープ制約
- **MVP範囲厳守**: Phase 1は品質チェックのみ
- **機能追加禁止**: 計画外の拡張は次フェーズ
- **デモ優先**: プレゼンテーション用の動作確認重視

### 品質制約
- **TDD実践**: テストファースト開発
- **カバレッジ**: 80%以上
- **自己品質**: PyQC自身でチェック通過

### 時間制約
- **Phase 1**: 40-60時間（1-2週間）
- **デモ準備**: プレゼンテーション日程考慮
- **学習コスト**: 30分以内で基本操作習得

## ビジネス制約

### ライセンス
- **MIT License**: オープンソース
- **商用利用**: 制限なし
- **依存関係**: MIT互換ライセンスのみ

### 配布方法
- **PyPI**: uv publishによる公開
- **GitHub**: ソースコード公開
- **ドキュメント**: README中心

## 運用制約

### 互換性
- **既存ツール**: ruff/mypy設定互換
- **エディタ**: VSCode, PyCharm対応
- **CI/CD**: GitHub Actions統合

### メンテナンス
- **更新頻度**: 依存関係の追従
- **サポート**: コミュニティベース
- **Breaking Changes**: セマンティックバージョニング

## リスク要因

### 技術リスク
- **ruff API変更**: 頻繁なアップデート
- **mypy/ty競合**: 型チェッカー選択の複雑性
- **uvエコシステム**: 新しいツールの成熟度
- **設定複雑性**: TOML/YAML/エイリアス変換の複雑性
- **外部プロセス実行**: subprocess実行の安全性とエラーハンドリング
- **出力パーサー**: ツールバージョンによる出力形式変更

### プロジェクトリスク
- **スコープクリープ**: 機能追加の誘惑
- **品質vs速度**: 完璧主義の罠
- **学習コスト**: 新技術習得の時間

### 外部リスク
- **依存関係**: セキュリティ脆弱性
- **Python変更**: 言語仕様変更
- **競合ツール**: 既存ツールの機能向上

## Claude Code Hooks 統合

### 設計背景
- **リアルタイム品質チェック**: Write/Edit/MultiEdit操作での自動実行
- **透明性の確保**: AI時代のデバッグと信頼性向上
- **ログ記録**: 包括的な実行履歴とパフォーマンス追跡

### 技術選定
- **専用スクリプト**: `scripts/pyqc_hooks.py` による実行制御
- **構造化ログ**: Rich + ファイル出力の組み合わせ
- **統計分析**: 成功率、実行時間、エラーパターン追跡

### パフォーマンス考慮
- **タイムアウト**: 15秒（Claude Hooks）、30秒（コマンド実行）
- **エラーハンドリング**: Graceful degradation
- **ログ効率**: 非同期I/O、ローテーション対応

### AI時代の開発フロー対応
- **高頻度コミット**: AI生成コードの頻繁な変更に対応
- **予測不可能なエラー**: AI特有のバグパターンへの対処
- **客観的指標**: 人間の主観に依存しない品質評価